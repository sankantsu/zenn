---
title: "ç°¡æ˜“ã€Œã‚³ãƒ³ãƒ†ãƒŠã€ã‚’å®Ÿè£…ã—ã¦ã‚³ãƒ³ãƒ†ãƒŠã¨ä»²è‰¯ããªã‚‹"
emoji: "ğŸ“¦"
type: "tech"
topics: ["container"]
published: false
---

## ã¯ã˜ã‚ã«

ã‚³ãƒ³ãƒ†ãƒŠã®åˆ©ç”¨ãŒåºƒãæµ¸é€ã—ã€æ—¥å¸¸çš„ã«ã‚³ãƒ³ãƒ†ãƒŠã‚’ä½¿ã†ã“ã¨ãŒå¤šããªã£ã¦ãã¾ã—ãŸã€‚
ä¸€æ–¹ã§ã€docker ã® CLI ã®æ“ä½œã¯ãªã‚“ã¨ãªãã‚ã‹ã‚‹ã‚ˆã†ã«ãªã£ã¦ããŸãŒã€ã„ã¾ã„ã¡è£ã§ä½•ãŒèµ·ãã¦ã„ã‚‹ã®ã‹ã¯ã‚ˆãç†è§£ã—ã¦ãŠã‚‰ãšãªã‚“ã¨ãªãã‚‚ã‚„ã‚‚ã‚„ã‚’æŠ±ãˆãªãŒã‚‰ã—ã°ã‚‰ãä½¿ã£ã¦ã„ãŸã‚ˆã†ã«æ„Ÿã˜ã¾ã™ã€‚

æœ€è¿‘ã€ã‚³ãƒ³ãƒ†ãƒŠã®æ¯”è¼ƒçš„ä½ãƒ¬ãƒ™ãƒ«ãªéƒ¨åˆ†ã«é–¢ã‚ã‚‹æŠ€è¡“ã«è§¦ã‚Œã‚‹æ©Ÿä¼šãŒã‚ã‚Šã€ã‚³ãƒ³ãƒ†ãƒŠãŒã©ã®ã‚ˆã†ã«å®Ÿç¾ã•ã‚Œã¦ã„ã‚‹ã‹ã¨ã„ã†ç‚¹ã«ã¤ã„ã¦å°‘ã—èª¿ã¹ã‚‹æ©Ÿä¼šãŒã‚ã‚Šã¾ã—ãŸã€‚

ã‚³ãƒ³ãƒ†ãƒŠã¯æ™®æ®µä½¿ã£ã¦ã„ã‚‹ã‚‚ã®ã§ã‚ã‚ŠãªãŒã‚‰ã€ã“ã‚Œã¾ã§ã‚ã¾ã‚Šå®Ÿè¡Œã®ä»•çµ„ã¿ã«è§¦ã‚Œã‚‹æ©Ÿä¼šã¯å¤šããªã‹ã£ãŸã‚ˆã†ã«æ„Ÿã˜ã¦ãŠã‚Šã€ä»Šå›è‡ªåˆ†ã®ç†è§£ã®ãŸã‚ã‚’å…¼ã­ã¦è¨˜äº‹ã«ã—ã¦ã¿ãŸã„ã¨è€ƒãˆã¾ã—ãŸã€‚

## æ¦‚è¦

ã“ã®è¨˜äº‹ã§ã¯ã¾ãšå‰åŠã§ã‚³ãƒ³ãƒ†ãƒŠã¨ã„ã†ç”¨èªã«ã¤ã„ã¦è¦‹ç›´ã—ã€ã‚³ãƒ³ãƒ†ãƒŠç’°å¢ƒãŒå®Ÿç¾ã—ã¦ã„ã‚‹ã“ã¨ã«ã¤ã„ã¦å°‘ã—æ•´ç†ã—ã¦ã¿ã¾ã™ã€‚ãã®å¾Œã€å¾ŒåŠéƒ¨åˆ†ã§ã¯ã„ãã¤ã‹ã®ã‚·ã‚¹ãƒ†ãƒ ã‚³ãƒ¼ãƒ«ã‚’åˆ©ç”¨ã—ã¦éå¸¸ã«ç°¡æ˜“çš„ãªã€Œã‚³ãƒ³ãƒ†ãƒŠã€ã‚’ä½œæˆã—ã¦ã¿ã¾ã™ã€‚
ä»¥ä¸Šã‚’é€šã—ã¦ã‚³ãƒ³ãƒ†ãƒŠã‚’æ§‹æˆã™ã‚‹æŠ€è¡“ã‚’å°‘ã—ã§ã‚‚èº«è¿‘ã«æ€ãˆã‚‹ã‚ˆã†ã«ãªã‚‹ã“ã¨ãŒç›®æ¨™ã§ã™ã€‚

ã‚³ãƒ³ãƒ†ãƒŠã«å¯¾ã™ã‚‹æ¼ ç„¶ã¨ã—ãŸãƒ–ãƒ©ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹æ„Ÿã‚’æ¸›ã‚‰ã—ã€

- ã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•æ™‚ã«ä½•ãŒèµ·ã“ã£ã¦ã„ã‚‹ã®ã‹
- ã‚³ãƒ³ãƒ†ãƒŠãŒãªãœæ¯”è¼ƒçš„è»½é‡ã«ç«‹ã¡ã‚ã’ã‚‰ã‚Œã‚‹ã®ã‹

ã¨ã„ã£ãŸç‚¹ãŒãªã‚“ã¨ãªãæ„Ÿã˜ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Œã°å¹¸ã„ã§ã™ã€‚

## ã€Œã‚³ãƒ³ãƒ†ãƒŠã€ã¨ã¯

ã€Œã‚³ãƒ³ãƒ†ãƒŠã€ã¨ã„ã†è¨€è‘‰ã¯ã‚ˆãä½¿ã„ã¾ã™ãŒã€æ³¨ç›®ã™ã‚‹å´é¢ã«ã‚ˆã£ã¦ã„ãã¤ã‹ã®æ„å‘³ã‚’æŒã£ã¦ã„ã‚‹ã‚ˆã†ã«æ„Ÿã˜ã‚‰ã‚Œã¾ã™ã€‚
ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®é…å¸ƒã‚„ãƒ‡ãƒ—ãƒ­ã‚¤ã¨ã„ã†æ–‡è„ˆã§ã¯ã€ã€Œå®Ÿè¡Œã«å¿…è¦ãªç’°å¢ƒä¸€å¼ã‚’ãƒãƒ³ãƒ‰ãƒ«ã—ãŸå¯æ¬æ€§ã®ã‚ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã€ã¨ã„ã†ã‚ˆã†ãªæ„å‘³åˆã„ãŒå¼·ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ä»¥ä¸‹ã®ã€Google Cloud ã® [ã‚³ãƒ³ãƒ†ãƒŠã¨ã¯](https://cloud.google.com/learn/what-are-containers) ã«ã‚ã‚‹ä»¥ä¸‹ã®å®šç¾©ãªã©ã¯ã“ã¡ã‚‰ãŒè¿‘ã„ã‚ˆã†ã«æ€ã‚ã‚Œã¾ã™ã€‚

> ã‚³ãƒ³ãƒ†ãƒŠã¨ã¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ ã‚³ãƒ¼ãƒ‰ã«ã€ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ ã‚µãƒ¼ãƒ“ã‚¹ã®å®Ÿè¡Œã«å¿…è¦ãªç‰¹å®šãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãªã©ã®ä¾å­˜é–¢ä¿‚ã‚’åŠ ãˆãŸè»½é‡ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’æŒ‡ã—ã¾ã™ã€‚

ä¸€æ–¹ã€ã‚³ãƒ³ãƒ†ãƒŠã®å®Ÿè¡Œæ™‚ã®å§¿ã¨ã„ã†è¦³ç‚¹ã§è€ƒãˆã‚‹ã¨ã€ã‚³ãƒ³ãƒ†ãƒŠã¯ã€Œãƒ›ã‚¹ãƒˆã‹ã‚‰éš”é›¢ã•ã‚ŒãŸãƒ—ãƒ­ã‚»ã‚¹ã®å®Ÿè¡Œç’°å¢ƒã€ã‚’æä¾›ã™ã‚‹ã‚‚ã®ã¨è€ƒãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã‚³ãƒ³ãƒ†ãƒŠç’°å¢ƒå†…ã§ã¯ã€ãƒ›ã‚¹ãƒˆã¨ã¯ç•°ãªã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ãŒè¦‹ãˆã¾ã™ã—ã€ãƒ›ã‚¹ãƒˆå´ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚‚åŸºæœ¬çš„ã«è¦‹ãˆãªããªã‚Šã€ãƒ›ã‚¹ãƒˆå´ã‹ã‚‰ã‚ã‚‹ç¨‹åº¦ç‹¬ç«‹ã—ãŸå®Ÿè¡Œç’°å¢ƒãŒæä¾›ã•ã‚Œã¾ã™ã€‚
ä»Šå›ã¯ã“ã®å®Ÿè¡Œæ™‚ã®æŒ¯ã‚‹èˆã„ã«æ³¨ç›®ã—ã€ãƒ›ã‚¹ãƒˆã‹ã‚‰ã®éš”é›¢ãŒã©ã®ã‚ˆã†ã«å®Ÿç¾ã•ã‚Œã¦ã„ã‚‹ã‹ã‚’å°‘ã—è¦‹ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚

### Open Container Initiative ã¨ã‚³ãƒ³ãƒ†ãƒŠé–¢é€£ã®ä»•æ§˜

ã‚³ãƒ³ãƒ†ãƒŠé–¢é€£ã®ä»•æ§˜ã«ã¤ã„ã¦ã¯é‡è¦ãªéƒ¨åˆ†ã‚’ [Open Container Initiative](https://opencontainers.org/) (OCI) ã¨ã„ã†çµ„ç¹”ãŒç®¡ç†ã—ã¦ã„ã¾ã™ã€‚
ç¾åœ¨ OCI ãŒç®¡ç†ã™ã‚‹ä»•æ§˜ (specification) ã¯ä»¥ä¸‹ã® 3 ã¤ãŒã‚ã‚Šã¾ã™ã€‚

- [Runtime Spec](https://github.com/opencontainers/runtime-spec)
- [Image Spec](https://github.com/opencontainers/image-spec)
- [Distribution Spec](https://github.com/opencontainers/distribution-spec)

ã“ã®ä¸­ã§æ¯”è¼ƒçš„èº«è¿‘ãªã®ã¯ Image Spec ã¨ Runtime Spec ã§ã¯ãªã„ã‹ã¨æ€ã„ã¾ã™ã€‚
Image Spec ã¯ã€Œã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã€ã®å½¢å¼ã‚’å®šç¾©ã™ã‚‹ã‚‚ã®ã§ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ  (ãƒ¬ã‚¤ãƒ¤) ã®æƒ…å ±ã‚„å®Ÿè¡Œã®ãŸã‚ã®è¨­å®š (e.g. å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰) ãªã©ã‚’å«ã‚ãŸé…å¸ƒå¯èƒ½ãªå½¢å¼ã‚’å®šç¾©ã—ã¾ã™ã€‚
Runtime Spec ã¯ã‚³ãƒ³ãƒ†ãƒŠã®å®Ÿè¡Œã®ãŸã‚ã®ä»•æ§˜ã§ã€ãƒ«ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã¨å®Ÿè¡Œã®ãŸã‚ã®è¨­å®š (`config.json`) ã‚’å—ã‘ã¨ã£ã¦ã‚³ãƒ³ãƒ†ãƒŠã‚’å®Ÿéš›ã«ãƒ›ã‚¹ãƒˆä¸Šã§å®Ÿè¡Œã™ã‚‹ (ä½ãƒ¬ãƒ™ãƒ«ã®) ã‚³ãƒ³ãƒ†ãƒŠãƒ©ãƒ³ã‚¿ã‚¤ãƒ ãŒæº€ãŸã™ã¹ãä»•æ§˜ã‚’å®šç¾©ã—ã¾ã™ã€‚

ä»Šå›ã®è¨˜äº‹ã§å®Ÿè£…ã™ã‚‹éƒ¨åˆ†ã¯ Runtime Spec ã‚’å®Ÿè£…ã™ã‚‹ `runc` ãªã©ã®ã‚³ãƒ³ãƒ†ãƒŠãƒ©ãƒ³ã‚¿ã‚¤ãƒ ãŒè¡Œã£ã¦ã„ã‚‹ä»•äº‹ã®ä¸€éƒ¨ã«ãªã‚Šã¾ã™ã€‚

### ã‚³ãƒ³ãƒ†ãƒŠãŒéš”é›¢ã™ã‚‹ã‚‚ã®/ã—ãªã„ã‚‚ã®

ã‚³ãƒ³ãƒ†ãƒŠã¯ãƒ›ã‚¹ãƒˆã‹ã‚‰ã‚ã‚‹ç¨‹åº¦éš”é›¢ã•ã‚ŒãŸç’°å¢ƒã‚’å®Ÿç¾ã—ã¾ã™ãŒã€ãƒ›ã‚¹ãƒˆã¨å…±æœ‰ã—ã¦ã„ã‚‹éƒ¨åˆ†ã‚‚ã‚ã‚Šã¾ã™ã€‚ä»¥ä¸‹ã®ã‚ˆã†ãªéƒ¨åˆ†ã¯ã‚³ãƒ³ãƒ†ãƒŠç’°å¢ƒã«ã‚ˆã£ã¦éš”é›¢ã•ã‚Œã¾ã™ã€‚

- ãƒ«ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ 
- ãƒ—ãƒ­ã‚»ã‚¹/ãƒã‚¦ãƒ³ãƒˆ/ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯/ãƒ¦ãƒ¼ã‚¶ãƒ¼/... åå‰ç©ºé–“ (`Namespace`)
- ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢è³‡æºå‰²ã‚Šå½“ã¦ (`cgroups`)

ãƒ«ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ  (`/`) ã¯ã‚³ãƒãƒ³ãƒ‰é¡ã€å…±æœ‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€OSãƒ»ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ç­‰ã‚’å«ã‚ãŸã‚·ã‚¹ãƒ†ãƒ ä¸Šã®ã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å«ã¿ã¾ã™ã€‚ã—ãŸãŒã£ã¦ã€ãƒ«ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚’éš”é›¢ã™ã‚‹ã“ã¨ã§ã€ãƒ›ã‚¹ãƒˆå´ã®ã‚·ã‚¹ãƒ†ãƒ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å½±éŸ¿ã‚’ä¸ãˆãšã«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã‚Šã€ãƒ›ã‚¹ãƒˆã‹ã‚‰ã‚ã‚‹ç¨‹åº¦ç‹¬ç«‹ã—ãŸã‚¯ãƒªãƒ¼ãƒ³ãªç’°å¢ƒã§ãƒ†ã‚¹ãƒˆã—ãŸã‚Šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

Namespace ã¯é€šå¸¸ãƒ—ãƒ­ã‚»ã‚¹é–“ã§å…±æœ‰ã•ã‚Œã‚‹ãƒ—ãƒ­ã‚»ã‚¹ ID ãƒ†ãƒ¼ãƒ–ãƒ«ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ãƒã‚¦ãƒ³ãƒˆã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç­‰ã®è³‡æºã‚’éš”é›¢ã™ã‚‹ãŸã‚ã® Linux ã®æ©Ÿèƒ½ã§ã™ã€‚[`man 7 namespaces`](https://man7.org/linux/man-pages/man7/namespaces.7.html) ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«èª¬æ˜ãŒã‚ã‚Šã¾ã™ã€‚

> A namespace wraps a global system resource in an abstraction that makes it appear to the processes within the  namespace  that they have their own isolated instance of the global resource.  Changes to the global resource are visible to other processes that are members of the namespace, but  are  invisible  to  other processes.

ä¸€æ–¹ã€ã‚³ãƒ³ãƒ†ãƒŠç’°å¢ƒã§ã¯åŸºæœ¬çš„ã«ã¯ Linux ã‚«ãƒ¼ãƒãƒ«è‡ªä½“ã¯ãƒ›ã‚¹ãƒˆå´ã‹ã‚‰éš”é›¢ã•ã‚Œã¦ãŠã‚‰ãšã€ãƒ›ã‚¹ãƒˆã¨å…±æœ‰ã—ã¦ã„ã¾ã™ã€‚ä¾‹ãˆã°ã€ã‚³ãƒ³ãƒ†ãƒŠå†…éƒ¨ã‹ã‚‰ã®ã‚·ã‚¹ãƒ†ãƒ ã‚³ãƒ¼ãƒ«ã®å‡¦ç†ã¯åŸºæœ¬çš„ã«ãƒ›ã‚¹ãƒˆã¨å…±é€šã®ã‚«ãƒ¼ãƒãƒ«ãŒå‡¦ç†ã—ã¾ã™ ^[è»½é‡ãª VM ã‚’ç”¨ã„ã‚‹ [Kata Container](https://katacontainers.io/) ã‚„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚«ãƒ¼ãƒãƒ«ã‚’ç”¨ã„ã‚‹ [gVisor](https://gvisor.dev/) ã®ã‚ˆã†ãªä¾‹å¤–ã‚‚ã‚ã‚Šã¾ã™]ã€‚

:::message
ãªãŠã€ãã‚‚ãã‚‚ãƒ›ã‚¹ãƒˆãŒ Linux ã§ã¯ãªã„å ´åˆ (e.g. Docker Desktop for Mac) ã§ã¯ã©ã†ãªã£ã¦ã„ã‚‹ã®ã‹ã¨ã„ã†ã¨ Docker Desktop ã«åŒæ¢±ã•ã‚Œã¦ã„ã‚‹ [linuxkit](https://github.com/linuxkit/linuxkit) ã¨ã„ã†è»½é‡ãª Linux ç’°å¢ƒãŒå‹•ã„ã¦ã„ã¦ã€ãã®ä¸Šã§ Docker ãŒå‹•ã„ã¦ã„ã‚‹ã¨ã„ã†å½¢ã«ãªã‚Šã¾ã™ã€‚

```sh
godai@MacBookL39HP-3:~% uname -a
Darwin MacBookL39HP-3.local 22.6.0 Darwin Kernel Version 22.6.0: Wed Jul 31 21:37:05 PDT 2024; root:xnu-8796.141.3.707.4~1/RELEASE_ARM64_T8112 arm64
godai@MacBookL39HP-3:~% docker run --rm -it alpine
/ # uname -a
Linux 6c907162487c 6.4.16-linuxkit #1 SMP PREEMPT Wed Oct 25 16:32:24 UTC 2023 aarch64 Linux
```
:::

## chroot ã¨ unshare ã§ç°¡æ˜“ã‚³ãƒ³ãƒ†ãƒŠç’°å¢ƒã‚’ä½œæˆã—ã¦ã¿ã‚‹

ã‚³ãƒ³ãƒ†ãƒŠã¨ã„ã†ç”¨èªã«ã¤ã„ã¦ã‚ã‚‹ç¨‹åº¦æ•´ç†ã§ããŸã¨ã“ã‚ã§ã€ä»¥ä¸‹ã§ã¯å®Ÿéš›ã« [`chroot(2)`](https://man7.org/linux/man-pages/man2/chroot.2.html) ã¨ [`unshare(2)`](https://man7.org/linux/man-pages/man2/unshare.2.html) ã‚’åˆ©ç”¨ã—ã¦ç°¡æ˜“çš„ãªã‚³ãƒ³ãƒ†ãƒŠç’°å¢ƒã‚’ä½œæˆã—ã¦ã¿ã¾ã™ã€‚

`chroot` ã¯ãƒ«ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚’å¤‰æ›´ã™ã‚‹ãŸã‚ã®ã‚·ã‚¹ãƒ†ãƒ ã‚³ãƒ¼ãƒ«ã§ã€ã“ã‚Œã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã§ãƒ›ã‚¹ãƒˆå´ã‹ã‚‰ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚’éš”é›¢ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
ã¾ãŸã€`unshare` ã¯æ–°ã—ã namespace ã‚’ä½œæˆã™ã‚‹ã“ã¨ã§ (ä»–ã®ãƒ—ãƒ­ã‚»ã‚¹ã®æ‰€å±ã™ã‚‹) å…ƒã® namespace ã‹ã‚‰ãƒ—ãƒ­ã‚»ã‚¹ã‚’åˆ‡ã‚Šé›¢ã™ã“ã¨ãŒã§ãã¾ã™ã€‚

:::message
ãƒ›ã‚¹ãƒˆå´ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒèª­ã¿å–ã‚Šã€å¤‰æ›´ã•ã‚Œãªã„ã‚ˆã†ã«ä¿è­·ã™ã‚‹ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›®çš„ã§ `chroot` ã‚’ä½¿ã£ã¦ã¯ã„ã‘ã¾ã›ã‚“ã€‚ã“ã‚Œã¯ã€`chroot` ç’°å¢ƒã®è„±å‡º (ãƒ«ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚’ãƒ›ã‚¹ãƒˆå´ã®ã‚‚ã®ã«æˆ»ã™) æ–¹æ³•ãŒã„ãã¤ã‹å­˜åœ¨ã™ã‚‹ãŸã‚ã§ã™ã€‚
ã‚ˆã‚Šå®Œå…¨ãªéš”é›¢ã‚’å®Ÿç¾ã—ãŸã„å ´åˆã«ã¯ [`pivot_root(2)`](https://man7.org/linux/man-pages/man2/pivot_root.2.html) ã¨ã„ã†ã‚·ã‚¹ãƒ†ãƒ ã‚³ãƒ¼ãƒ«ã‚’åˆ©ç”¨ã§ãã¾ã™ã€‚`chroot` ã¨æ¯”ã¹ã‚‹ã¨è‹¥å¹²æ‰‹é †ãŒå¢—ãˆã‚‹ãŸã‚ã€ä½¿ã„æ–¹ã«ã¤ã„ã¦ã¯ä»Šå›ã¯ç´¹ä»‹ã—ã¾ã›ã‚“ã€‚
å®Ÿéš›ã®ã‚³ãƒ³ãƒ†ãƒŠãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã¯åŸºæœ¬çš„ã« `pivot_root` ã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹ã¯ãšã§ã™ã€‚
:::

ã¾ãšã¯ã‚·ã‚§ãƒ«ä¸Šã§ [`chroot(1)`](https://man7.org/linux/man-pages/man1/chroot.1.html)^[ç’°å¢ƒã«ã‚ˆã£ã¦ã¯ `chroot(8)` ã«ãªã£ã¦ã„ã‚‹å ´åˆã‚‚ã‚ã‚Šã¾ã™ã€‚] ã‚³ãƒãƒ³ãƒ‰ã‚„ [`unshare(1)`](https://man7.org/linux/man-pages/man1/unshare.1.html) ã‚³ãƒãƒ³ãƒ‰ã‚’ç”¨ã„ã¦ç°¡æ˜“ã‚³ãƒ³ãƒ†ãƒŠç’°å¢ƒã‚’ä½œæˆã—ã¦ã¿ã¾ã™ã€‚
ãã®å¾Œã€ã»ã¼åŒç­‰ã®å†…å®¹ã‚’ (ç©ºè¡Œãƒ»ã‚³ãƒ¡ãƒ³ãƒˆé™¤ã) 30 è¡Œç¨‹åº¦ã® C è¨€èªã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§å®Ÿè£…ã—ã¦ã¿ã¾ã™ã€‚

### ãƒ«ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®æº–å‚™

`chroot` ã‚’ä½¿ã†å‰æº–å‚™ã¨ã—ã¦ã€`chroot` ç’°å¢ƒå†…ã§ä½¿ã†ãŸã‚ã®ãƒ«ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚’ç”¨æ„ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚æ–¹æ³•ã®ã²ã¨ã¤ã¨ã—ã¦ã€`docker container export` ã¨ã„ã† docker ã‚³ãƒ³ãƒ†ãƒŠå†…ã®ãƒ«ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚’ tar ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã¨ã—ã¦ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹æ©Ÿèƒ½ã‚’ç”¨ã„ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã“ã§ã¯ä¾‹ã¨ã—ã¦ `alpine` ã‚³ãƒ³ãƒ†ãƒŠã®ãƒ«ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¦ `rootfs/` ã¨ã„ã†ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å±•é–‹ã—ã¦ã¿ã¾ã™ã€‚

```sh
ubuntu@primary:~/code/container-demo$ docker container create alpine
a928c619283538e51492dda66af3d7c6fa257f9f79353647eac1149c01211194
ubuntu@primary:~/code/container-demo$ docker container export a928c6 >rootfs.tar
ubuntu@primary:~/code/container-demo$ mkdir rootfs
ubuntu@primary:~/code/container-demo$ tar -C rootfs -xf rootfs.tar
ubuntu@primary:~/code/container-demo$ ls rootfs
bin  dev  etc  home  lib  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
ubuntu@primary:~/code/container-demo$ cat rootfs/etc/os-release
NAME="Alpine Linux"
ID=alpine
VERSION_ID=3.20.3
PRETTY_NAME="Alpine Linux v3.20"
HOME_URL="https://alpinelinux.org/"
BUG_REPORT_URL="https://gitlab.alpinelinux.org/alpine/aports/-/issues"
```

ã‚‚ã¡ã‚ã‚“ã€docker ã‚’ä½¿ã‚ãªã„ã§ä»–ã®ä½•ã‚‰ã‹ã®æ–¹æ³•ã§ãƒ«ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã® tar ã‚’å…¥æ‰‹ã—ã¦ã‚‚æ§‹ã„ã¾ã›ã‚“ã€‚ä»¥ä¸‹ã§ã¯ã€`rootfs/` ã« `alpine` ã®ãƒ«ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’å‰æã¨ã—ã¾ã™ã€‚

### ã‚·ã‚§ãƒ«ä¸Šã‹ã‚‰ç°¡æ˜“ã‚³ãƒ³ãƒ†ãƒŠä½œæˆ

ã¾ãšã¯ `chroot` ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿéš›ã«ä½¿ã£ã¦ãƒ«ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚’å¤‰æ›´ã—ã¦ã¿ã¾ã™ã€‚

```
chroot [OPTION] NEWROOT [COMMAND [ARG]...]
# NEWROOT: æ–°ã—ããƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«è¨­å®šã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
# COMMAND: ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒå¤‰æ›´ã•ã‚ŒãŸ chroot ç’°å¢ƒå†…ã§å®Ÿè¡Œã™ã‚‹ã‚³ãƒãƒ³ãƒ‰
```

ä»¥ä¸‹ã®ä¾‹ã§ã¯ã€å…ˆã»ã© `alpine` ã®ãƒ«ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚’ç”¨æ„ã—ãŸ `rootfs/` ç’°å¢ƒå†…ã§ `sh` ã‚’å®Ÿè¡Œã™ã‚‹ä¾‹ã§ã™ã€‚

```sh
ubuntu@primary:~/code/container-demo$ sudo chroot rootfs/ sh
/ # ls
bin    etc    lib    mnt    proc   run    srv    tmp    var
dev    home   media  opt    root   sbin   sys    usr
/ # cat /etc/os-release
NAME="Alpine Linux"
ID=alpine
VERSION_ID=3.20.3
PRETTY_NAME="Alpine Linux v3.20"
HOME_URL="https://alpinelinux.org/"
BUG_REPORT_URL="https://gitlab.alpinelinux.org/alpine/aports/-/issues"
```

`/etc/os-release` ã®å†…å®¹ã‹ã‚‰ã€ãƒ«ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ãŒ `alpine` ã®ã‚‚ã®ã«ç½®ãä»£ã‚ã£ã¦ã„ã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã™ã€‚

ãƒ«ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ãŒéš”é›¢ã•ã‚ŒãŸã“ã¨ã§ã ã„ã¶ã‚³ãƒ³ãƒ†ãƒŠã‚‰ã—ãã¯ãªã‚Šã¾ã—ãŸãŒã€ã“ã®æ™‚ç‚¹ã§ã¯ä¾‹ãˆã°ãƒ—ãƒ­ã‚»ã‚¹ ID ç©ºé–“ãªã©ã¯ãƒ›ã‚¹ãƒˆã¨éš”é›¢ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ã“ã‚Œã¯ã€ä¾‹ãˆã°ä»¥ä¸‹ã®ã‚ˆã†ã« proc ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚’ãƒã‚¦ãƒ³ãƒˆã—ã¦ `ps` ã‚³ãƒãƒ³ãƒ‰ã§ãƒ—ãƒ­ã‚»ã‚¹ä¸€è¦§ã‚’è¦‹ã‚‹ã“ã¨ã§ç¢ºèªã§ãã¾ã™ã€‚

```sh
/ # mount -t proc proc /proc
/ # ps
PID   USER     TIME  COMMAND
    1 root      0:12 /usr/lib/systemd/systemd --system --deserialize=25
    2 root      0:00 [kthreadd]
  ... (ä¸­ç•¥)
33029 root      0:00 sudo chroot rootfs/ sh
33030 root      0:00 sudo chroot rootfs/ sh
33031 root      0:00 sh
33034 root      0:00 ps
/ # umount /proc
```

æ¬¡ã«ã€`unshare` ã‚³ãƒãƒ³ãƒ‰ã‚’åˆ©ç”¨ã—ã¦ãƒ«ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®å¤‰æ›´ã¨åˆã‚ã›ã¦ namespace ã®éš”é›¢ã‚’è¡Œã£ã¦ã¿ã¾ã™ã€‚ä»¥ä¸‹ã«ä»Šå›ç”¨ã„ã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ç°¡å˜ã«èª¬æ˜ã—ã¾ã™ã€‚

- `--root rootfs`: ãƒ«ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚’è¨­å®š
  - å°‘ãªãã¨ã‚‚ä»Šå›è©¦ã—ãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã¯å†…éƒ¨çš„ã« `chroot(2)` ãŒä½¿ã‚ãŒä½¿ã‚ã‚Œã‚‹
- `--mount-proc`: mount namespace ã‚’åˆ†é›¢ + æ–° namespace å†…ã§ proc ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚’ãƒã‚¦ãƒ³ãƒˆ
- `--pid --fork`: pid namespace ã‚’åˆ†é›¢ ^[`unshare(CLONE_NEWPID)` ã‚’å‘¼ã³å‡ºã—ãŸã ã‘ã ã¨å‘¼ã³å‡ºã—å…ƒã®ãƒ—ãƒ­ã‚»ã‚¹ã¯æ–°è¦ namespace å†…ã«ã¯ç§»å‹•ã•ã‚Œãšã€å‘¼ã³å‡ºã—å¾Œã«ä½œæˆã•ã‚ŒãŸæœ€åˆã®å­ãƒ—ãƒ­ã‚»ã‚¹ãŒæ–°è¦ pid namespace å†…ã®æœ€åˆã®ãƒ—ãƒ­ã‚»ã‚¹ã«ãªã‚‹ãŸã‚ã€`--fork` ãŒå¿…è¦ã§ã™ã€‚è©³ã—ãã¯ [`man 7 pid_namespaces`](https://man7.org/linux/man-pages/man7/pid_namespaces.7.html) ç­‰ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚]

```sh
ubuntu@primary:~/code/container-demo$ sudo unshare --root rootfs --mount-proc --pid --fork sh
/ # cat /etc/os-release
NAME="Alpine Linux"
ID=alpine
VERSION_ID=3.20.3
PRETTY_NAME="Alpine Linux v3.20"
HOME_URL="https://alpinelinux.org/"
BUG_REPORT_URL="https://gitlab.alpinelinux.org/alpine/aports/-/issues"
/ # ps
PID   USER     TIME  COMMAND
    1 root      0:00 sh
    3 root      0:00 ps
```

ä»Šå›ã¯ pid namespace ã‚’åˆ†é›¢ã—ãŸãŸã‚ã€Œã‚³ãƒ³ãƒ†ãƒŠç’°å¢ƒã€å†…ã‹ã‚‰ãƒ›ã‚¹ãƒˆå´ã®ãƒ—ãƒ­ã‚»ã‚¹ã®æƒ…å ±ãŒè¦‹ãˆãªããªã£ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚

### C è¨€èªã§å®Ÿè£…

ä¸Šã§ `chroot(1)` ã‚’ç”¨ã„ã¦è¡Œã£ãŸæ“ä½œã‚’ C è¨€èªã§å®Ÿè£…ã—ã¦ã¿ã¾ã™ã€‚ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ `container_demo.c` ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«åã§ä¿å­˜ã—ã¾ã™ã€‚

```c
// container_demo.c
#define _GNU_SOURCE
#include <errno.h>      // errno
#include <sched.h>      // unshare
#include <stdio.h>      // printf
#include <stdlib.h>     // exit
#include <string.h>     // strerror
#include <sys/mount.h>  // mount
#include <sys/wait.h>   // wait
#include <unistd.h>     // chdir, chroot, execl, fork

void exit_error_if(char *msg, int b) {
    if (b) {
        printf("%s: %s\n", msg, strerror(errno));
        exit(1);
    }
}

int main() {
    // (1) Create new mount+pid namespace and mount procfs
    exit_error_if("unshare", unshare(CLONE_NEWNS|CLONE_NEWPID) == -1);
    // (2) Make all mount private in the new mount namespace (see mount_namespaces(7))
    exit_error_if("mount", mount("none", "/", NULL, MS_REC|MS_PRIVATE, NULL) == -1);

    // (3) Change filesystem root and set working directory to new root
    exit_error_if("chroot", chroot("./rootfs") == -1);
    exit_error_if("chdir", chdir("/") == -1);

    // (4) fork() is required for shell to run in new pid namespace
    pid_t pid = fork();
    exit_error_if("fork", pid == -1);
    if (pid == 0) {
        // (5) procfs mount should be done in new pid namespace
        exit_error_if("mount", mount("proc", "/proc", "proc", 0, NULL));
        // (6) Execute login shell in a container
        execl("/bin/sh", "-sh", NULL);
    } else {
        // Parent should wait child to not to lose controlling terminal
        wait(NULL);
    }
}
```

ã‚³ãƒ¼ãƒ‰ä¸­ã®ã‚³ãƒ¡ãƒ³ãƒˆã¨é‡è¤‡ã™ã‚‹éƒ¨åˆ†ãŒã‚ã‚Šã¾ã™ãŒã€ç°¡å˜ã«å†…å®¹ã«ã¤ã„ã¦è£œè¶³ã—ã¾ã™ã€‚

- (1): `unshare(2)` ã‚’ç”¨ã„ã¦ namespace ã‚’åˆ†é›¢ã—ã¾ã™ã€‚
  - `CLONE_NEWNS` ã¯ mount namespace, `CLONE_NEWPID` ã¯ pid namespace ã‚’åˆ†é›¢ã™ã‚‹ãŸã‚ã®ãƒ•ãƒ©ã‚°ã§ã™ã€‚
- (2): ã“ã®å‘¼ã³å‡ºã—ä»¥å¾Œã« (æ—§) ãƒ«ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ä¸‹ã«æ–°ãŸã«ä½œæˆã•ã‚Œã‚‹ãƒã‚¦ãƒ³ãƒˆãŒ mount namespace ã®å¤–ã«è¦‹ãˆãªããªã‚‹ã‚ˆã†ã«è¨­å®šã—ã¦ã„ã¾ã™^[ã“ã‚Œã‚’ã‚„ã‚‰ãªã„ã¨ã‚·ã‚¹ãƒ†ãƒ ä¸Šã®ãƒã‚¦ãƒ³ãƒˆã®è¨­å®šã«ã‚ˆã£ã¦ã¯ (5) ã§ä½œæˆã™ã‚‹ procfs ã®ãƒã‚¦ãƒ³ãƒˆãŒ namespace ã®å¤–ã«æ¼ã‚Œã¦ã—ã¾ã„ã¾ã™ã€‚ã“ã®éƒ¨åˆ†ã¯æ­£ç›´ã‹ãªã‚Šç´°ã‹ã„é…æ…®ãªã®ã§ã‚ã¾ã‚Šæ°—ã«ã—ãªãã¦ã‚‚è‰¯ã„ã§ã™ã€‚è©³ã—ãã¯ [`man 7 mount_namespaces`](https://man7.org/linux/man-pages/man7/mount_namespaces.7.html) ã® SHARED SUBTREES ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãªã©ã‚’å‚ç…§ã—ã¦ãã ã•ã„]ã€‚
- (3): `chroot(2)` ã§ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’å¤‰æ›´ã—ãŸå¾Œã€æ–°ã—ã„ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ã¾ã™ã€‚
- (4): æ–°è¦ pid namespace å†…ã«æœ€åˆã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’ä½œæˆã™ã‚‹ãŸã‚ fork ã—ã¾ã™ã€‚
- (5): æ–°è¦ pid namespace ã‚’å‚ç…§ã™ã‚‹ proc ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚’ãƒã‚¦ãƒ³ãƒˆã—ã¾ã™ã€‚
- (6): ã€Œã‚³ãƒ³ãƒ†ãƒŠç’°å¢ƒã€å†…ã§ãƒ­ã‚°ã‚¤ãƒ³ã‚·ã‚§ãƒ«ã‚’èµ·å‹•ã—ã¾ã™ã€‚

ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ã¦å‹•ä½œç¢ºèªã—ã¦ã¿ã¾ã™ã€‚

```sh
ubuntu@primary:~/code/container-demo$ gcc container_demo.c
ubuntu@primary:~/code/container-demo$ sudo ./a.out
primary:/# cat /etc/os-release
NAME="Alpine Linux"
ID=alpine
VERSION_ID=3.20.3
PRETTY_NAME="Alpine Linux v3.20"
HOME_URL="https://alpinelinux.org/"
BUG_REPORT_URL="https://gitlab.alpinelinux.org/alpine/aports/-/issues"
primary:/# ps
PID   USER     TIME  COMMAND
    1 root      0:00 -sh
    3 root      0:00 ps
```

ã“ã¡ã‚‰ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã‚‚ãƒ«ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚’å…¥ã‚Œã‹ãˆã‚‰ã‚Œã¦ã„ã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã—ãŸã€‚

## ãŠã‚ã‚Šã«

ä»Šå›ã®è¨˜äº‹ã§ã¯ã‚³ãƒ³ãƒ†ãƒŠãŒä½•ã‚’å®Ÿç¾ã—ã¦ã„ã‚‹ã‹ã‚’å°‘ã—æ•´ç†ã—ã€ã•ã‚‰ã«ç°¡æ˜“çš„ãªã€Œã‚³ãƒ³ãƒ†ãƒŠç’°å¢ƒã€ã‚’å®Ÿè£…ã—ã¦ã¿ã¾ã—ãŸã€‚ã“ã®è¨˜äº‹ã‚’é€šã—ã¦ã‚³ãƒ³ãƒ†ãƒŠæŠ€è¡“ã«ã¤ã„ã¦å°‘ã—ã§ã‚‚èº«è¿‘ã«æ„Ÿã˜ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ãŸã ã‘ãŸã‚‰å¹¸ã„ã«æ€ã„ã¾ã™ã€‚
ã¾ãŸã€ä»Šå›ã®è¨˜äº‹ã§ã¯ã‚«ãƒãƒ¼ã§ããªã‹ã£ãŸãƒˆãƒ”ãƒƒã‚¯ã‚‚å¤šãã‚ã‚Šã¾ã™ã€‚ä¾‹ãˆã° [`cgroups`](https://docs.kernel.org/admin-guide/cgroup-v2.html) ã¯ã‚³ãƒ³ãƒ†ãƒŠãŒåˆ©ç”¨ã§ãã‚‹ CPUã€ãƒ¡ãƒ¢ãƒªç­‰ã®è³‡æºã‚’åˆ¶é™ã™ã‚‹ãŸã‚ã«ä½¿ã‚ã‚Œã¦ãŠã‚Šã€ã‚³ãƒ³ãƒ†ãƒŠã®é‡è¦ãªæ§‹æˆã¨è¨€ãˆã‚‹ã§ã—ã‚‡ã†ã€‚

ã“ã®ã‚ˆã†ãªã‚³ãƒ³ãƒ†ãƒŠé–¢é€£ã®ä»–ã®ãƒˆãƒ”ãƒƒã‚¯ã‚’èª¿ã¹ã¦ã¿ãŸã‚Šã€[`runc`](https://github.com/opencontainers/runc), [`youki`](https://github.com/youki-dev/youki) ç­‰ã®å®Ÿè£…ã‚’èª­ã‚“ã§ã¿ãŸã‚Šã™ã‚‹ã®ã‚‚é¢ç™½ã„ã¨æ€ã„ã¾ã™ã€‚

## å‚è€ƒ

- æ›¸ç±: [Binary Hacks Rebooted](https://www.oreilly.co.jp/books/9784814400850/)
  - #37ã€€Linuxãƒãƒ¼ãƒ ã‚¹ãƒšãƒ¼ã‚¹ã§ãƒ—ãƒ­ã‚»ã‚¹ã‚’åˆ†é›¢ã™ã‚‹
  - #39ã€€chroot/pivot_rootã§ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹
- [OCI Runtime Spec](https://github.com/opencontainers/runtime-spec/blob/main/spec.md)
- [opencontainers/runc](https://github.com/opencontainers/runc)
- utam0k æ° (youki ã®ä½œè€…) ã®è¨˜äº‹ãƒ»è³‡æ–™
  - [utam0k/container-demo](https://github.com/utam0k/container-demo)
  - [Hello, youki!](https://www.utam0k.jp/blog/2021/12/27/youki_first_release/)
  - [ã€Œã‚ã‚Œã€ã‚³ãƒ³ãƒ†ãƒŠã£ã¦ä½•ã ã£ã‘ï¼Ÿã€ã‹ã‚‰ç”Ÿã¾ã‚ŒãŸ Rust ã§æ›¸ã‹ã‚ŒãŸ ã‚³ãƒ³ãƒ†ãƒŠãƒ©ãƒ³ã‚¿ã‚¤ãƒ  youkiã®è©±@ODC2021](https://speakerdeck.com/utam0k/are-kontenatutehe-datuke-karasheng-mareta-rust-deshu-kareta-kontenarantaimu-youkifalsehua-at-odc2021)
  - [è©³èª¬ OCIã‚³ãƒ³ãƒ†ãƒŠãƒ©ãƒ³ã‚¿ã‚¤ãƒ  youki@ç¬¬15å› ã‚³ãƒ³ãƒ†ãƒŠæŠ€è¡“ã®æƒ…å ±äº¤æ›ä¼š](https://speakerdeck.com/utam0k/xiang-shuo-ocikontenarantaimu-youki-at-di-15hui-kontenaji-shu-falseqing-bao-jiao-huan-hui)
